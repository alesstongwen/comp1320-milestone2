<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
    />
    <link rel="stylesheet" href="/src/global.css" />
    <link rel="stylesheet" href="/src/styleguide.css" />
    <link rel="stylesheet" href="/src/style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <header>
      <div class="container">
        <div
          style="
            margin-bottom: 2px;
            border: 1px solid #ccc;
            border-radius: 10px;
            overflow: hidden;
          "
        ></div>
        <div style="background-color: white">
          <a href="/">
            <img
              src="https://cdn4.iconfinder.com/data/icons/picons-social/57/38-instagram-2-512.png"
              width="50"
              style="padding-left: 5px"
            />
          </a>
        </div>

        <div class="frame">
          <div class="div">
            <div class="text-wrapper">Users</div>
          </div>
          <div class="div-5">
            <div class="div-6 row">
              <% users.forEach(user=> { %>
              <div class="div-7 md-4">
                <img
                  class="ellipse"
                  src="/src/photos/<%= user.username %>/profile.jpeg"
                  alt="<%= user.username %>'s Profile Image"
                />
                <div class="div-5">
                  <div class="div-8">
                    <div class="text-wrapper-5">
                      <a href="/feed?username=<%= user.username %>">
                        <%= user.username %>
                      </a>
                    </div>
                    <div class="text-wrapper-6"><%= user.description %></div>
                  </div>
                  <div class="div-9">
                    <div class="div-10">
                      <form
                        action="/images"
                        method="POST"
                        enctype="multipart/form-data"
                        class="upload-form"
                        oninput="updateFileName()"
                      >
                        <input
                          type="hidden"
                          name="username"
                          value="<%= user.username %>"
                        />
                        <label for="fileInput" class="file-input-label">
                          <span class="file-input-text">選擇圖片</span>
                          <input
                            type="file"
                            name="file"
                            id="fileInput"
                            class="file-input"
                          />
                        </label>
                        <button type="submit" class="submit-button">
                          送出圖片
                        </button>
                      </form>
                    </div>
                    <div style="display: none" class="div-wrapper-3">
                      <div class="text-wrapper-7"></div>
                    </div>
                  </div>
                </div>
              </div>
              <% }); %>
            </div>
          </div>
        </div>
      </div>
      <!-- End of container -->
    </header>

    <script>
      function updateFileName() {
        var fileInput = document.getElementById("fileInput");
        var fileNameDisplay = document.querySelector(".text-wrapper-7");
        var divWrapper = document.querySelector(".div-wrapper-3");

        if (fileInput.files.length > 0) {
          fileNameDisplay.textContent =
            "選擇的檔案: " + fileInput.files[0].name;
          divWrapper.style.display = "block";
        } else {
          fileNameDisplay.textContent = "";
          divWrapper.style.display = "none";
        }
      }
    </script>
  </body>
</html>
